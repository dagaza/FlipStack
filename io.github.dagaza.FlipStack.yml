app-id: io.github.dagaza.FlipStack
runtime: org.gnome.Platform
runtime-version: '46'
sdk: org.gnome.Sdk
command: flipstack
finish-args:
  # Networking (needed if you plan to add syncing later, harmless now)
  - --share=network
  # Display (Wayland + X11 fallback)
  - --socket=fallback-x11
  - --socket=wayland
  # Audio (PulseAudio/Pipewire access for 'paplay')
  - --socket=pulseaudio
  # GPU Acceleration
  - --device=dri
  # X11 Shared Memory (Important for GTK4 performance)
  - --share=ipc

modules:
  - name: flipstack
    buildsystem: simple
    build-commands:
      - mkdir -p /app/bin
      - mkdir -p /app/share/flipstack
      - mkdir -p /app/share/applications
      - mkdir -p /app/share/icons/hicolor/scalable/apps

      - cp -r *.py /app/share/flipstack/
      - cp -r assets /app/share/flipstack/

      - install -D -m 755 flipstack.sh /app/bin/flipstack

      - install -D -m 644 io.github.dagaza.FlipStack.desktop /app/share/applications/io.github.dagaza.FlipStack.desktop

      - cp icons/logo.svg /app/share/icons/hicolor/scalable/apps/io.github.dagaza.FlipStack.svg

    sources:
      - type: dir
        path: .
